<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Adminpanel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    :root {
      --primary-color: #0080c9;
      --secondary-color: #009640;
      --light-gray: #f5f7fa;
      --border-color: #e0e0e0;
      --shadow-sm: 0 2px 5px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
      --transition: all 0.25s ease;
    }

    h1 {
      height: 1.5em;
      margin: 0;
    }
    
    body {
      background-color: var(--light-gray);
      font-family: "Segoe UI", sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .main-content {
      flex: 1;
      padding: 2rem;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }

    .section-header {
      margin-bottom: 1.5rem;
      color: #333;
      font-weight: 500;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.75rem;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .action-card {
      background: #fff;
      border: 1px solid var(--border-color);
      border-radius: 0.6rem;
      padding: 1.5rem;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 1.25rem;
      text-decoration: none;
      color: inherit;
      box-shadow: var(--shadow-sm);
    }

    .action-card:hover {
      box-shadow: var(--shadow-md);
      transform: translateY(-3px);
      border-color: #ccc;
    }
    
    .action-card .icon-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 56px;
      height: 56px;
      border-radius: 12px;
      background-color: #f8f9fa;
    }
    
    .action-card .icon-primary {
      background-color: rgba(13, 110, 253, 0.1);
    }
    
    .action-card .icon-success {
      background-color: rgba(0, 150, 64, 0.1);
    }

    .action-card h5 {
      font-size: 1.2rem;
      margin-bottom: 0.4rem;
      font-weight: 500;
    }
    
    .action-card p {
      line-height: 1.4;
    }

    .logout-btn {
      padding: 0.4rem 1rem;
      border-radius: 6px;
      font-size: 0.9rem;
      transition: var(--transition);
    }
    
    .logout-btn:hover {
      background-color: #dc3545;
      border-color: #dc3545;
      color: white;
    }

    .commit-info {
      position: fixed;
      bottom: 15px;
      right: 15px;
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 8px 14px;
      font-size: 0.85rem;
      color: #555;
      box-shadow: var(--shadow-sm);
      z-index: 100;
      transition: var(--transition);
    }
    
    .commit-info:hover {
      box-shadow: var(--shadow-md);
    }

    .commit-info a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
    }

    .commit-info a:hover {
      text-decoration: underline;
    }
    
    .github-icon {
      color: #333;
      transition: var(--transition);
    }
    
    .github-icon:hover {
      color: #000;
    }
    
    @media (max-width: 768px) {
      .main-content {
        padding: 1.5rem;
      }
      
      .card-grid {
        grid-template-columns: 1fr;
      }
    }

    .header-container {
      background-color: #fff;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
      display: flex;
      align-items: center;
    }

    .logo {
      height: 2.2em;
      margin-right: 0.75em;
    }

    body {
      background-color: #f5f7fa;
      font-family: "Segoe UI", sans-serif;
      padding: 2rem;
      margin: 0;
    }
  </style>
</head>
<body>
  <!-- Topbar volume -->
  <div class="header-container">
    <svg class="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 204.81 205.89">
      <defs>
        <style>
          .cls-1 { fill: #009640; }
          .cls-2 { fill: #0080c9; }
        </style>
      </defs>
      <path class="cls-1"
        d="m202.48,7.71c-2.68-3-20.39-3.88-25.59-3.74-1.78.05-2.45.8-2.8,2.13-.25.96-.87,6.51-1.3,16.81-.69,29.42-4.61,96.59-11.99,125.08-6.84,26.4-12.73,30.99-18.66,29.46-3.06-.79-8.59-3.05-12.56-5.09,0,0-67.27-29.35-73.77-31.04-7.08-1.83-9.74,1.35-10.93,5.94-1.29,4.97.77,34.86.36,43.53-.2,6.28-.6,13.32,6.29,15.1l101.68-.27c8.56,0,10.37-2.21,14.24-17.13,5.75-22.18,10.15-48.6,11.92-70.39,0,0,4.74-64.7,5.3-72.52.64-8.78,16-.72,17.87-4.72,3.41-7.3,2.61-30.15-.07-33.15Z" />
      <path class="cls-2"
        d="m147.06,98.57c4.89-3.65,11.47-8.64,12.95-14.65,3.3-13.44,4.18-60.25-9.65-68.77C132.41,4.09,37.07-7.18,31.73,5.84c-6.67,16.25,11.62,37.15,28.89,54.62l54.31,49.91c5.72,5.69,26.83,23.75,20.42,30.77-5.45,5.97-36.32-23.29-42.48-28.87l-45.65-44.39c-3.8-3.57-11.5-8.08-17.84-9.63-10.74-2.64-15.9,13.38-22.04,38.33-3.73,15.16-9.41,33.29-6.59,44.16,2.68,10.63,10.72,20.13,21.66,22.82,4.41,1.09,7.38-1.03,8.27-4.68,2.55-10.36-19.11-9.99-15.01-26.68,3.25-13.24,19.32-19.86,31.8-16.8,3.84.95,12.82,4.98,16.23,6.84l47.64,26.36c4.66,2.57,24.2,14.81,34.77,1.55,20.49-25.7-22.43-68.2-38.48-80.3-16.71-12.97-69.89-42.59-60.78-55.29,7.2-10.04,91.53,20.65,96.71,60.79.47,3.66-2.86,13.68-4.69,15.59,0,0-2.47,2.7.09,5.49,4.01,4.38,8.1,2.13,8.1,2.13Z" />    
    </svg>
    <h1>Adminpanel</h1>
    <a href="/dashboard" class="btn btn-outline-primary me-2 ms-auto">Startsida</a>
    <button class="btn btn-outline-secondary logout-btn" onclick="logout()">
      <i class="bi bi-box-arrow-right me-2"></i>Logga ut
    </button>
  </div>
  
  <!-- Main Content -->
  <main class="main-content">
    <h4 class="section-header">Systemfunktioner</h4>
    <div class="card-grid">
      <a href="/entries" class="action-card">
        <div class="icon-wrapper icon-primary">
          <i class="bi bi-card-list fs-3 text-primary"></i>
        </div>
        <div>
          <h5>Provtagningar</h5>
          <p class="mb-0 text-muted">Hantera och granska provtagningar i systemet.</p>
        </div>
      </a>

      <a href="/qr-generate" class="action-card">
        <div class="icon-wrapper icon-success">
          <i class="bi bi-qr-code fs-3 text-success"></i>
        </div>
        <div>
          <h5>Generera etiketter</h5>
          <p class="mb-0 text-muted">Skapa och skriv ut QR-etiketter för provtagningar.</p>
        </div>
      </a>
    </div>
  </main>

  <!-- Commit Info -->
  <div class="commit-info" id="commit-info">
    <span>Laddar commit-info...</span>
  </div>

  <!-- JavaScript -->
  <script>
    function logout() {
      window.location.href = '/logout';
    }

    // Fetch latest commit info from GitHub
    fetch('https://api.github.com/repos/Sormland-Vatten-och-Avfall-AB/provtagnings-app/commits')
      .then(response => response.json())
      .then(data => {
        const latestCommit = data[0];
        const sha = latestCommit.sha.substring(0, 7);
        const date = new Date(latestCommit.commit.author.date).toLocaleDateString('sv-SE');
        const commitUrl = latestCommit.html_url;
        const repoUrl = 'https://github.com/Sormland-Vatten-och-Avfall-AB/provtagnings-app';

        document.getElementById('commit-info').innerHTML = `
          Körs från commit <a href="${commitUrl}" target="_blank">${sha}</a> (${date})
          &nbsp;|&nbsp;
          <a href="${repoUrl}" target="_blank" aria-label="GitHub Repository">
            <i class="bi bi-github fs-5 github-icon"></i>
          </a>
        `;
      })
      .catch(error => {
        console.error('Error fetching commit info:', error);
        document.getElementById('commit-info').innerHTML = `Version kunde ej hämtas. <a href="https://github.com/Sormland-Vatten-och-Avfall-AB/provtagnings-app" target="_blank"><i class="bi bi-github fs-5 github-icon"></i></a>`;
      });
  </script>

</body>
</html>